{"dependencies":[{"name":"./cacheService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"geOzLCD+YMq1DIPlywZE/XucC8I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"PrefetchService\", {\n    enumerable: true,\n    get: function () {\n      return PrefetchService;\n    }\n  });\n  var _cacheService = require(_dependencyMap[0], \"./cacheService\");\n  const API_BASE = process.env.EXPO_PUBLIC_BACKEND_URL || \"\";\n  const API = path => `${API_BASE}/api${path.startsWith(\"/\") ? path : `/${path}`}`;\n  async function apiGet(path) {\n    const res = await fetch(API(path));\n    if (!res.ok) throw new Error(`GET ${path} ${res.status}`);\n    return res.json();\n  }\n\n  /**\n   * Service de préchargement intelligent des données fréquentes\n   */\n  class PrefetchService {\n    static isPrefetching = false;\n\n    /**\n     * Précharge les données les plus fréquemment consultées\n     */\n    static async prefetchFrequentData() {\n      if (this.isPrefetching) return;\n      this.isPrefetching = true;\n      try {\n        // Précharger en parallèle\n        await Promise.all([this.prefetchPeopleList(), this.prefetchTrendingData(), this.prefetchControversialData()]);\n        console.log('✅ Prefetch completed');\n      } catch (error) {\n        console.error('Prefetch error:', error);\n      } finally {\n        this.isPrefetching = false;\n      }\n    }\n\n    /**\n     * Précharge la liste principale des personnalités\n     */\n    static async prefetchPeopleList() {\n      try {\n        const data = await apiGet('/people');\n        await _cacheService.CacheService.set('people_all', data, 5 * 60 * 1000);\n      } catch (error) {\n        console.error('Failed to prefetch people list:', error);\n      }\n    }\n\n    /**\n     * Précharge les données trending\n     */\n    static async prefetchTrendingData() {\n      try {\n        const data = await apiGet('/trending-now?limit=5');\n        await _cacheService.CacheService.set('trending_data', data, 5 * 60 * 1000);\n      } catch (error) {\n        console.error('Failed to prefetch trending data:', error);\n      }\n    }\n\n    /**\n     * Précharge les données controversées\n     */\n    static async prefetchControversialData() {\n      try {\n        const data = await apiGet('/controversial?limit=5');\n        await _cacheService.CacheService.set('controversial_data', data, 5 * 60 * 1000);\n      } catch (error) {\n        console.error('Failed to prefetch controversial data:', error);\n      }\n    }\n\n    /**\n     * Précharge les graphiques d'une personnalité spécifique\n     */\n    static async prefetchPersonData(personId) {\n      try {\n        await Promise.all([apiGet(`/people/${personId}`).then(data => _cacheService.CacheService.set(`person_${personId}`, data, 2 * 60 * 1000)), apiGet(`/people/${personId}/chart?window=24h`).then(data => _cacheService.CacheService.set(`chart_24h_${personId}`, data, 2 * 60 * 1000)), apiGet(`/people/${personId}/chart?window=168h`).then(data => _cacheService.CacheService.set(`chart_168h_${personId}`, data, 5 * 60 * 1000))]);\n      } catch (error) {\n        console.error(`Failed to prefetch person ${personId}:`, error);\n      }\n    }\n\n    /**\n     * Précharge les personnalités les plus populaires\n     */\n    static async prefetchTopPeople(peopleIds) {\n      // Limiter à 5 max pour ne pas surcharger\n      const limitedIds = peopleIds.slice(0, 5);\n      for (const id of limitedIds) {\n        await this.prefetchPersonData(id);\n      }\n    }\n  }\n});","lineCount":103,"map":[[7,2,15,0,"Object"],[7,8,15,0],[7,9,15,0,"defineProperty"],[7,23,15,0],[7,24,15,0,"exports"],[7,31,15,0],[8,4,15,0,"enumerable"],[8,14,15,0],[9,4,15,0,"get"],[9,7,15,0],[9,18,15,0,"get"],[9,19,15,0],[10,6,15,0],[10,13,15,0,"PrefetchService"],[10,28,15,0],[11,4,15,0],[12,2,15,0],[13,2,1,0],[13,6,1,0,"_cacheService"],[13,19,1,0],[13,22,1,0,"require"],[13,29,1,0],[13,30,1,0,"_dependencyMap"],[13,44,1,0],[14,2,3,0],[14,8,3,6,"API_BASE"],[14,16,3,14],[14,19,3,17,"process"],[14,26,3,24],[14,27,3,25,"env"],[14,30,3,28],[14,31,3,29,"EXPO_PUBLIC_BACKEND_URL"],[14,54,3,52],[14,58,3,56],[14,60,3,58],[15,2,4,0],[15,8,4,6,"API"],[15,11,4,9],[15,14,4,13,"path"],[15,18,4,25],[15,22,4,30],[15,25,4,33,"API_BASE"],[15,33,4,41],[15,40,4,48,"path"],[15,44,4,52],[15,45,4,53,"startsWith"],[15,55,4,63],[15,56,4,64],[15,59,4,67],[15,60,4,68],[15,63,4,71,"path"],[15,67,4,75],[15,70,4,78],[15,74,4,82,"path"],[15,78,4,86],[15,80,4,88],[15,82,4,90],[16,2,6,0],[16,17,6,15,"apiGet"],[16,23,6,21,"apiGet"],[16,24,6,25,"path"],[16,28,6,37],[16,30,6,51],[17,4,7,2],[17,10,7,8,"res"],[17,13,7,11],[17,16,7,14],[17,22,7,20,"fetch"],[17,27,7,25],[17,28,7,26,"API"],[17,31,7,29],[17,32,7,30,"path"],[17,36,7,34],[17,37,7,35],[17,38,7,36],[18,4,8,2],[18,8,8,6],[18,9,8,7,"res"],[18,12,8,10],[18,13,8,11,"ok"],[18,15,8,13],[18,17,8,15],[18,23,8,21],[18,27,8,25,"Error"],[18,32,8,30],[18,33,8,31],[18,40,8,38,"path"],[18,44,8,42],[18,48,8,46,"res"],[18,51,8,49],[18,52,8,50,"status"],[18,58,8,56],[18,60,8,58],[18,61,8,59],[19,4,9,2],[19,11,9,9,"res"],[19,14,9,12],[19,15,9,13,"json"],[19,19,9,17],[19,20,9,18],[19,21,9,19],[20,2,10,0],[22,2,12,0],[23,0,13,0],[24,0,14,0],[25,2,15,7],[25,8,15,13,"PrefetchService"],[25,23,15,28],[25,24,15,29],[26,4,16,2],[26,11,16,17,"isPrefetching"],[26,24,16,30],[26,27,16,33],[26,32,16,38],[28,4,18,2],[29,0,19,0],[30,0,20,0],[31,4,21,2],[31,17,21,15,"prefetchFrequentData"],[31,37,21,35,"prefetchFrequentData"],[31,38,21,35],[31,40,21,38],[32,6,22,4],[32,10,22,8],[32,14,22,12],[32,15,22,13,"isPrefetching"],[32,28,22,26],[32,30,22,28],[33,6,24,4],[33,10,24,8],[33,11,24,9,"isPrefetching"],[33,24,24,22],[33,27,24,25],[33,31,24,29],[34,6,26,4],[34,10,26,8],[35,8,27,6],[36,8,28,6],[36,14,28,12,"Promise"],[36,21,28,19],[36,22,28,20,"all"],[36,25,28,23],[36,26,28,24],[36,27,29,8],[36,31,29,12],[36,32,29,13,"prefetchPeopleList"],[36,50,29,31],[36,51,29,32],[36,52,29,33],[36,54,30,8],[36,58,30,12],[36,59,30,13,"prefetchTrendingData"],[36,79,30,33],[36,80,30,34],[36,81,30,35],[36,83,31,8],[36,87,31,12],[36,88,31,13,"prefetchControversialData"],[36,113,31,38],[36,114,31,39],[36,115,31,40],[36,116,32,7],[36,117,32,8],[37,8,34,6,"console"],[37,15,34,13],[37,16,34,14,"log"],[37,19,34,17],[37,20,34,18],[37,42,34,40],[37,43,34,41],[38,6,35,4],[38,7,35,5],[38,8,35,6],[38,15,35,13,"error"],[38,20,35,18],[38,22,35,20],[39,8,36,6,"console"],[39,15,36,13],[39,16,36,14,"error"],[39,21,36,19],[39,22,36,20],[39,39,36,37],[39,41,36,39,"error"],[39,46,36,44],[39,47,36,45],[40,6,37,4],[40,7,37,5],[40,16,37,14],[41,8,38,6],[41,12,38,10],[41,13,38,11,"isPrefetching"],[41,26,38,24],[41,29,38,27],[41,34,38,32],[42,6,39,4],[43,4,40,2],[45,4,42,2],[46,0,43,0],[47,0,44,0],[48,4,45,2],[48,17,45,23,"prefetchPeopleList"],[48,35,45,41,"prefetchPeopleList"],[48,36,45,41],[48,38,45,44],[49,6,46,4],[49,10,46,8],[50,8,47,6],[50,14,47,12,"data"],[50,18,47,16],[50,21,47,19],[50,27,47,25,"apiGet"],[50,33,47,31],[50,34,47,32],[50,43,47,41],[50,44,47,42],[51,8,48,6],[51,14,48,12,"CacheService"],[51,27,48,24],[51,28,48,24,"CacheService"],[51,40,48,24],[51,41,48,25,"set"],[51,44,48,28],[51,45,48,29],[51,57,48,41],[51,59,48,43,"data"],[51,63,48,47],[51,65,48,49],[51,66,48,50],[51,69,48,53],[51,71,48,55],[51,74,48,58],[51,78,48,62],[51,79,48,63],[52,6,49,4],[52,7,49,5],[52,8,49,6],[52,15,49,13,"error"],[52,20,49,18],[52,22,49,20],[53,8,50,6,"console"],[53,15,50,13],[53,16,50,14,"error"],[53,21,50,19],[53,22,50,20],[53,55,50,53],[53,57,50,55,"error"],[53,62,50,60],[53,63,50,61],[54,6,51,4],[55,4,52,2],[57,4,54,2],[58,0,55,0],[59,0,56,0],[60,4,57,2],[60,17,57,23,"prefetchTrendingData"],[60,37,57,43,"prefetchTrendingData"],[60,38,57,43],[60,40,57,46],[61,6,58,4],[61,10,58,8],[62,8,59,6],[62,14,59,12,"data"],[62,18,59,16],[62,21,59,19],[62,27,59,25,"apiGet"],[62,33,59,31],[62,34,59,32],[62,57,59,55],[62,58,59,56],[63,8,60,6],[63,14,60,12,"CacheService"],[63,27,60,24],[63,28,60,24,"CacheService"],[63,40,60,24],[63,41,60,25,"set"],[63,44,60,28],[63,45,60,29],[63,60,60,44],[63,62,60,46,"data"],[63,66,60,50],[63,68,60,52],[63,69,60,53],[63,72,60,56],[63,74,60,58],[63,77,60,61],[63,81,60,65],[63,82,60,66],[64,6,61,4],[64,7,61,5],[64,8,61,6],[64,15,61,13,"error"],[64,20,61,18],[64,22,61,20],[65,8,62,6,"console"],[65,15,62,13],[65,16,62,14,"error"],[65,21,62,19],[65,22,62,20],[65,57,62,55],[65,59,62,57,"error"],[65,64,62,62],[65,65,62,63],[66,6,63,4],[67,4,64,2],[69,4,66,2],[70,0,67,0],[71,0,68,0],[72,4,69,2],[72,17,69,23,"prefetchControversialData"],[72,42,69,48,"prefetchControversialData"],[72,43,69,48],[72,45,69,51],[73,6,70,4],[73,10,70,8],[74,8,71,6],[74,14,71,12,"data"],[74,18,71,16],[74,21,71,19],[74,27,71,25,"apiGet"],[74,33,71,31],[74,34,71,32],[74,58,71,56],[74,59,71,57],[75,8,72,6],[75,14,72,12,"CacheService"],[75,27,72,24],[75,28,72,24,"CacheService"],[75,40,72,24],[75,41,72,25,"set"],[75,44,72,28],[75,45,72,29],[75,65,72,49],[75,67,72,51,"data"],[75,71,72,55],[75,73,72,57],[75,74,72,58],[75,77,72,61],[75,79,72,63],[75,82,72,66],[75,86,72,70],[75,87,72,71],[76,6,73,4],[76,7,73,5],[76,8,73,6],[76,15,73,13,"error"],[76,20,73,18],[76,22,73,20],[77,8,74,6,"console"],[77,15,74,13],[77,16,74,14,"error"],[77,21,74,19],[77,22,74,20],[77,62,74,60],[77,64,74,62,"error"],[77,69,74,67],[77,70,74,68],[78,6,75,4],[79,4,76,2],[81,4,78,2],[82,0,79,0],[83,0,80,0],[84,4,81,2],[84,17,81,15,"prefetchPersonData"],[84,35,81,33,"prefetchPersonData"],[84,36,81,34,"personId"],[84,44,81,50],[84,46,81,52],[85,6,82,4],[85,10,82,8],[86,8,83,6],[86,14,83,12,"Promise"],[86,21,83,19],[86,22,83,20,"all"],[86,25,83,23],[86,26,83,24],[86,27,84,8,"apiGet"],[86,33,84,14],[86,34,84,15],[86,45,84,26,"personId"],[86,53,84,34],[86,55,84,36],[86,56,84,37],[86,57,84,38,"then"],[86,61,84,42],[86,62,84,43,"data"],[86,66,84,47],[86,70,85,10,"CacheService"],[86,83,85,22],[86,84,85,22,"CacheService"],[86,96,85,22],[86,97,85,23,"set"],[86,100,85,26],[86,101,85,27],[86,111,85,37,"personId"],[86,119,85,45],[86,121,85,47],[86,123,85,49,"data"],[86,127,85,53],[86,129,85,55],[86,130,85,56],[86,133,85,59],[86,135,85,61],[86,138,85,64],[86,142,85,68],[86,143,86,8],[86,144,86,9],[86,146,87,8,"apiGet"],[86,152,87,14],[86,153,87,15],[86,164,87,26,"personId"],[86,172,87,34],[86,191,87,53],[86,192,87,54],[86,193,87,55,"then"],[86,197,87,59],[86,198,87,60,"data"],[86,202,87,64],[86,206,88,10,"CacheService"],[86,219,88,22],[86,220,88,22,"CacheService"],[86,232,88,22],[86,233,88,23,"set"],[86,236,88,26],[86,237,88,27],[86,250,88,40,"personId"],[86,258,88,48],[86,260,88,50],[86,262,88,52,"data"],[86,266,88,56],[86,268,88,58],[86,269,88,59],[86,272,88,62],[86,274,88,64],[86,277,88,67],[86,281,88,71],[86,282,89,8],[86,283,89,9],[86,285,90,8,"apiGet"],[86,291,90,14],[86,292,90,15],[86,303,90,26,"personId"],[86,311,90,34],[86,331,90,54],[86,332,90,55],[86,333,90,56,"then"],[86,337,90,60],[86,338,90,61,"data"],[86,342,90,65],[86,346,91,10,"CacheService"],[86,359,91,22],[86,360,91,22,"CacheService"],[86,372,91,22],[86,373,91,23,"set"],[86,376,91,26],[86,377,91,27],[86,391,91,41,"personId"],[86,399,91,49],[86,401,91,51],[86,403,91,53,"data"],[86,407,91,57],[86,409,91,59],[86,410,91,60],[86,413,91,63],[86,415,91,65],[86,418,91,68],[86,422,91,72],[86,423,92,8],[86,424,92,9],[86,425,93,7],[86,426,93,8],[87,6,94,4],[87,7,94,5],[87,8,94,6],[87,15,94,13,"error"],[87,20,94,18],[87,22,94,20],[88,8,95,6,"console"],[88,15,95,13],[88,16,95,14,"error"],[88,21,95,19],[88,22,95,20],[88,51,95,49,"personId"],[88,59,95,57],[88,62,95,60],[88,64,95,62,"error"],[88,69,95,67],[88,70,95,68],[89,6,96,4],[90,4,97,2],[92,4,99,2],[93,0,100,0],[94,0,101,0],[95,4,102,2],[95,17,102,15,"prefetchTopPeople"],[95,34,102,32,"prefetchTopPeople"],[95,35,102,33,"peopleIds"],[95,44,102,52],[95,46,102,54],[96,6,103,4],[97,6,104,4],[97,12,104,10,"limitedIds"],[97,22,104,20],[97,25,104,23,"peopleIds"],[97,34,104,32],[97,35,104,33,"slice"],[97,40,104,38],[97,41,104,39],[97,42,104,40],[97,44,104,42],[97,45,104,43],[97,46,104,44],[98,6,106,4],[98,11,106,9],[98,17,106,15,"id"],[98,19,106,17],[98,23,106,21,"limitedIds"],[98,33,106,31],[98,35,106,33],[99,8,107,6],[99,14,107,12],[99,18,107,16],[99,19,107,17,"prefetchPersonData"],[99,37,107,35],[99,38,107,36,"id"],[99,40,107,38],[99,41,107,39],[100,6,108,4],[101,4,109,2],[102,2,110,0],[103,0,110,1],[103,3]],"functionMap":{"names":["<global>","API","apiGet","PrefetchService","PrefetchService.prefetchFrequentData","PrefetchService.prefetchPeopleList","PrefetchService.prefetchTrendingData","PrefetchService.prefetchControversialData","PrefetchService.prefetchPersonData","apiGet.then$argument_0","PrefetchService.prefetchTopPeople"],"mappings":"AAA;YCG,8ED;AEE;CFI;OGK;ECM;GDmB;EEK;GFO;EGK;GHO;EIK;GJO;EKK;2CCG;qEDC;4DCE;wEDC;6DCE;yEDC;GLM;EOK;GPO;CHC"},"hasCjsExports":false},"type":"js/module"}]}