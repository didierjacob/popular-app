{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"CacheService\", {\n    enumerable: true,\n    get: function () {\n      return CacheService;\n    }\n  });\n  exports.fetchWithCache = fetchWithCache;\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const CACHE_PREFIX = 'cache_';\n  const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes en millisecondes\n\n  /**\n   * Service de cache intelligent pour optimiser les appels API\n   */\n  class CacheService {\n    /**\n     * Sauvegarde des données dans le cache avec un TTL\n     */\n    static async set(key, data, ttl = DEFAULT_TTL) {\n      try {\n        const entry = {\n          data,\n          timestamp: Date.now(),\n          ttl\n        };\n        await AsyncStorage.default.setItem(`${CACHE_PREFIX}${key}`, JSON.stringify(entry));\n      } catch (error) {\n        console.error(`Cache set error for key ${key}:`, error);\n      }\n    }\n\n    /**\n     * Récupère des données du cache si elles sont encore valides\n     * @returns Les données ou null si le cache est expiré ou inexistant\n     */\n    static async get(key) {\n      try {\n        const cached = await AsyncStorage.default.getItem(`${CACHE_PREFIX}${key}`);\n        if (!cached) return null;\n        const entry = JSON.parse(cached);\n        const now = Date.now();\n\n        // Vérifier si le cache est expiré\n        if (now - entry.timestamp > entry.ttl) {\n          // Cache expiré, le supprimer\n          await this.remove(key);\n          return null;\n        }\n        return entry.data;\n      } catch (error) {\n        console.error(`Cache get error for key ${key}:`, error);\n        return null;\n      }\n    }\n\n    /**\n     * Supprime une entrée du cache\n     */\n    static async remove(key) {\n      try {\n        await AsyncStorage.default.removeItem(`${CACHE_PREFIX}${key}`);\n      } catch (error) {\n        console.error(`Cache remove error for key ${key}:`, error);\n      }\n    }\n\n    /**\n     * Vide tout le cache\n     */\n    static async clear() {\n      try {\n        const keys = await AsyncStorage.default.getAllKeys();\n        const cacheKeys = keys.filter(key => key.startsWith(CACHE_PREFIX));\n        await AsyncStorage.default.multiRemove(cacheKeys);\n      } catch (error) {\n        console.error('Cache clear error:', error);\n      }\n    }\n\n    /**\n     * Vérifie si une clé existe dans le cache et est valide\n     */\n    static async has(key) {\n      const data = await this.get(key);\n      return data !== null;\n    }\n  }\n\n  /**\n   * Fonction helper pour fetch avec cache automatique\n   */\n  async function fetchWithCache(url, cacheKey, fetchFn, ttl = DEFAULT_TTL) {\n    // Essayer de récupérer depuis le cache\n    const cached = await CacheService.get(cacheKey);\n    if (cached !== null) {\n      return cached;\n    }\n\n    // Pas en cache, faire la requête\n    const data = await fetchFn();\n\n    // Sauvegarder dans le cache\n    await CacheService.set(cacheKey, data, ttl);\n    return data;\n  }\n});","lineCount":118,"map":[[12,2,15,0,"Object"],[12,8,15,0],[12,9,15,0,"defineProperty"],[12,23,15,0],[12,24,15,0,"exports"],[12,31,15,0],[13,4,15,0,"enumerable"],[13,14,15,0],[14,4,15,0,"get"],[14,7,15,0],[14,18,15,0,"get"],[14,19,15,0],[15,6,15,0],[15,13,15,0,"CacheService"],[15,25,15,0],[16,4,15,0],[17,2,15,0],[18,2,94,0,"exports"],[18,9,94,0],[18,10,94,0,"fetchWithCache"],[18,24,94,0],[18,27,94,0,"fetchWithCache"],[18,41,94,0],[19,2,1,0],[19,6,1,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,1,0],[19,45,1,0,"require"],[19,52,1,0],[19,53,1,0,"_dependencyMap"],[19,67,1,0],[20,2,1,0],[20,6,1,0,"AsyncStorage"],[20,18,1,0],[20,21,1,0,"_interopDefault"],[20,36,1,0],[20,37,1,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,1,0],[21,2,3,0],[21,8,3,6,"CACHE_PREFIX"],[21,20,3,18],[21,23,3,21],[21,31,3,29],[22,2,4,0],[22,8,4,6,"DEFAULT_TTL"],[22,19,4,17],[22,22,4,20],[22,23,4,21],[22,26,4,24],[22,28,4,26],[22,31,4,29],[22,35,4,33],[22,36,4,34],[22,37,4,35],[24,2,12,0],[25,0,13,0],[26,0,14,0],[27,2,15,7],[27,8,15,13,"CacheService"],[27,20,15,25],[27,21,15,26],[28,4,16,2],[29,0,17,0],[30,0,18,0],[31,4,19,2],[31,17,19,15,"set"],[31,20,19,18,"set"],[31,21,19,22,"key"],[31,24,19,33],[31,26,19,35,"data"],[31,30,19,42],[31,32,19,44,"ttl"],[31,35,19,55],[31,38,19,58,"DEFAULT_TTL"],[31,49,19,69],[31,51,19,86],[32,6,20,4],[32,10,20,8],[33,8,21,6],[33,14,21,12,"entry"],[33,19,21,32],[33,22,21,35],[34,10,22,8,"data"],[34,14,22,12],[35,10,23,8,"timestamp"],[35,19,23,17],[35,21,23,19,"Date"],[35,25,23,23],[35,26,23,24,"now"],[35,29,23,27],[35,30,23,28],[35,31,23,29],[36,10,24,8,"ttl"],[37,8,25,6],[37,9,25,7],[38,8,26,6],[38,14,26,12,"AsyncStorage"],[38,26,26,24],[38,27,26,24,"default"],[38,34,26,24],[38,35,26,25,"setItem"],[38,42,26,32],[38,43,26,33],[38,46,26,36,"CACHE_PREFIX"],[38,58,26,48],[38,61,26,51,"key"],[38,64,26,54],[38,66,26,56],[38,68,26,58,"JSON"],[38,72,26,62],[38,73,26,63,"stringify"],[38,82,26,72],[38,83,26,73,"entry"],[38,88,26,78],[38,89,26,79],[38,90,26,80],[39,6,27,4],[39,7,27,5],[39,8,27,6],[39,15,27,13,"error"],[39,20,27,18],[39,22,27,20],[40,8,28,6,"console"],[40,15,28,13],[40,16,28,14,"error"],[40,21,28,19],[40,22,28,20],[40,49,28,47,"key"],[40,52,28,50],[40,55,28,53],[40,57,28,55,"error"],[40,62,28,60],[40,63,28,61],[41,6,29,4],[42,4,30,2],[44,4,32,2],[45,0,33,0],[46,0,34,0],[47,0,35,0],[48,4,36,2],[48,17,36,15,"get"],[48,20,36,18,"get"],[48,21,36,22,"key"],[48,24,36,33],[48,26,36,54],[49,6,37,4],[49,10,37,8],[50,8,38,6],[50,14,38,12,"cached"],[50,20,38,18],[50,23,38,21],[50,29,38,27,"AsyncStorage"],[50,41,38,39],[50,42,38,39,"default"],[50,49,38,39],[50,50,38,40,"getItem"],[50,57,38,47],[50,58,38,48],[50,61,38,51,"CACHE_PREFIX"],[50,73,38,63],[50,76,38,66,"key"],[50,79,38,69],[50,81,38,71],[50,82,38,72],[51,8,39,6],[51,12,39,10],[51,13,39,11,"cached"],[51,19,39,17],[51,21,39,19],[51,28,39,26],[51,32,39,30],[52,8,41,6],[52,14,41,12,"entry"],[52,19,41,32],[52,22,41,35,"JSON"],[52,26,41,39],[52,27,41,40,"parse"],[52,32,41,45],[52,33,41,46,"cached"],[52,39,41,52],[52,40,41,53],[53,8,42,6],[53,14,42,12,"now"],[53,17,42,15],[53,20,42,18,"Date"],[53,24,42,22],[53,25,42,23,"now"],[53,28,42,26],[53,29,42,27],[53,30,42,28],[55,8,44,6],[56,8,45,6],[56,12,45,10,"now"],[56,15,45,13],[56,18,45,16,"entry"],[56,23,45,21],[56,24,45,22,"timestamp"],[56,33,45,31],[56,36,45,34,"entry"],[56,41,45,39],[56,42,45,40,"ttl"],[56,45,45,43],[56,47,45,45],[57,10,46,8],[58,10,47,8],[58,16,47,14],[58,20,47,18],[58,21,47,19,"remove"],[58,27,47,25],[58,28,47,26,"key"],[58,31,47,29],[58,32,47,30],[59,10,48,8],[59,17,48,15],[59,21,48,19],[60,8,49,6],[61,8,51,6],[61,15,51,13,"entry"],[61,20,51,18],[61,21,51,19,"data"],[61,25,51,23],[62,6,52,4],[62,7,52,5],[62,8,52,6],[62,15,52,13,"error"],[62,20,52,18],[62,22,52,20],[63,8,53,6,"console"],[63,15,53,13],[63,16,53,14,"error"],[63,21,53,19],[63,22,53,20],[63,49,53,47,"key"],[63,52,53,50],[63,55,53,53],[63,57,53,55,"error"],[63,62,53,60],[63,63,53,61],[64,8,54,6],[64,15,54,13],[64,19,54,17],[65,6,55,4],[66,4,56,2],[68,4,58,2],[69,0,59,0],[70,0,60,0],[71,4,61,2],[71,17,61,15,"remove"],[71,23,61,21,"remove"],[71,24,61,22,"key"],[71,27,61,33],[71,29,61,50],[72,6,62,4],[72,10,62,8],[73,8,63,6],[73,14,63,12,"AsyncStorage"],[73,26,63,24],[73,27,63,24,"default"],[73,34,63,24],[73,35,63,25,"removeItem"],[73,45,63,35],[73,46,63,36],[73,49,63,39,"CACHE_PREFIX"],[73,61,63,51],[73,64,63,54,"key"],[73,67,63,57],[73,69,63,59],[73,70,63,60],[74,6,64,4],[74,7,64,5],[74,8,64,6],[74,15,64,13,"error"],[74,20,64,18],[74,22,64,20],[75,8,65,6,"console"],[75,15,65,13],[75,16,65,14,"error"],[75,21,65,19],[75,22,65,20],[75,52,65,50,"key"],[75,55,65,53],[75,58,65,56],[75,60,65,58,"error"],[75,65,65,63],[75,66,65,64],[76,6,66,4],[77,4,67,2],[79,4,69,2],[80,0,70,0],[81,0,71,0],[82,4,72,2],[82,17,72,15,"clear"],[82,22,72,20,"clear"],[82,23,72,20],[82,25,72,38],[83,6,73,4],[83,10,73,8],[84,8,74,6],[84,14,74,12,"keys"],[84,18,74,16],[84,21,74,19],[84,27,74,25,"AsyncStorage"],[84,39,74,37],[84,40,74,37,"default"],[84,47,74,37],[84,48,74,38,"getAllKeys"],[84,58,74,48],[84,59,74,49],[84,60,74,50],[85,8,75,6],[85,14,75,12,"cacheKeys"],[85,23,75,21],[85,26,75,24,"keys"],[85,30,75,28],[85,31,75,29,"filter"],[85,37,75,35],[85,38,75,36,"key"],[85,41,75,39],[85,45,75,43,"key"],[85,48,75,46],[85,49,75,47,"startsWith"],[85,59,75,57],[85,60,75,58,"CACHE_PREFIX"],[85,72,75,70],[85,73,75,71],[85,74,75,72],[86,8,76,6],[86,14,76,12,"AsyncStorage"],[86,26,76,24],[86,27,76,24,"default"],[86,34,76,24],[86,35,76,25,"multiRemove"],[86,46,76,36],[86,47,76,37,"cacheKeys"],[86,56,76,46],[86,57,76,47],[87,6,77,4],[87,7,77,5],[87,8,77,6],[87,15,77,13,"error"],[87,20,77,18],[87,22,77,20],[88,8,78,6,"console"],[88,15,78,13],[88,16,78,14,"error"],[88,21,78,19],[88,22,78,20],[88,42,78,40],[88,44,78,42,"error"],[88,49,78,47],[88,50,78,48],[89,6,79,4],[90,4,80,2],[92,4,82,2],[93,0,83,0],[94,0,84,0],[95,4,85,2],[95,17,85,15,"has"],[95,20,85,18,"has"],[95,21,85,19,"key"],[95,24,85,30],[95,26,85,50],[96,6,86,4],[96,12,86,10,"data"],[96,16,86,14],[96,19,86,17],[96,25,86,23],[96,29,86,27],[96,30,86,28,"get"],[96,33,86,31],[96,34,86,32,"key"],[96,37,86,35],[96,38,86,36],[97,6,87,4],[97,13,87,11,"data"],[97,17,87,15],[97,22,87,20],[97,26,87,24],[98,4,88,2],[99,2,89,0],[101,2,91,0],[102,0,92,0],[103,0,93,0],[104,2,94,7],[104,17,94,22,"fetchWithCache"],[104,31,94,36,"fetchWithCache"],[104,32,95,2,"url"],[104,35,95,13],[104,37,96,2,"cacheKey"],[104,45,96,18],[104,47,97,2,"fetchFn"],[104,54,97,27],[104,56,98,2,"ttl"],[104,59,98,13],[104,62,98,16,"DEFAULT_TTL"],[104,73,98,27],[104,75,99,14],[105,4,100,2],[106,4,101,2],[106,10,101,8,"cached"],[106,16,101,14],[106,19,101,17],[106,25,101,23,"CacheService"],[106,37,101,35],[106,38,101,36,"get"],[106,41,101,39],[106,42,101,43,"cacheKey"],[106,50,101,51],[106,51,101,52],[107,4,102,2],[107,8,102,6,"cached"],[107,14,102,12],[107,19,102,17],[107,23,102,21],[107,25,102,23],[108,6,103,4],[108,13,103,11,"cached"],[108,19,103,17],[109,4,104,2],[111,4,106,2],[112,4,107,2],[112,10,107,8,"data"],[112,14,107,12],[112,17,107,15],[112,23,107,21,"fetchFn"],[112,30,107,28],[112,31,107,29],[112,32,107,30],[114,4,109,2],[115,4,110,2],[115,10,110,8,"CacheService"],[115,22,110,20],[115,23,110,21,"set"],[115,26,110,24],[115,27,110,25,"cacheKey"],[115,35,110,33],[115,37,110,35,"data"],[115,41,110,39],[115,43,110,41,"ttl"],[115,46,110,44],[115,47,110,45],[116,4,112,2],[116,11,112,9,"data"],[116,15,112,13],[117,2,113,0],[118,0,113,1],[118,3]],"functionMap":{"names":["<global>","CacheService","CacheService.set","CacheService.get","CacheService.remove","CacheService.clear","keys.filter$argument_0","CacheService.has","fetchWithCache"],"mappings":"AAA;OCc;ECI;GDW;EEM;GFoB;EGK;GHM;EIK;oCCG,mCD;GJK;EMK;GNG;CDC;OQK;CRmB"},"hasCjsExports":false},"type":"js/module"}]}