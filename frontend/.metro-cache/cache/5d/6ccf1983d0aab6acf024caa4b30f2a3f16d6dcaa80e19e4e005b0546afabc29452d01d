{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"./cacheService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"geOzLCD+YMq1DIPlywZE/XucC8I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"PrefetchService\", {\n    enumerable: true,\n    get: function () {\n      return PrefetchService;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _cacheService = require(_dependencyMap[1], \"./cacheService\");\n  const API_BASE = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || \"\";\n  const API = path => `${API_BASE}/api${path.startsWith(\"/\") ? path : `/${path}`}`;\n  _c = API;\n  async function apiGet(path) {\n    const res = await fetch(API(path));\n    if (!res.ok) throw new Error(`GET ${path} ${res.status}`);\n    return res.json();\n  }\n\n  /**\n   * Service de préchargement intelligent des données fréquentes\n   */\n  class PrefetchService {\n    static isPrefetching = false;\n\n    /**\n     * Précharge les données les plus fréquemment consultées\n     */\n    static async prefetchFrequentData() {\n      if (this.isPrefetching) return;\n      this.isPrefetching = true;\n      try {\n        // Précharger en parallèle\n        await Promise.all([this.prefetchPeopleList(), this.prefetchTrendingData(), this.prefetchControversialData()]);\n        console.log('✅ Prefetch completed');\n      } catch (error) {\n        console.error('Prefetch error:', error);\n      } finally {\n        this.isPrefetching = false;\n      }\n    }\n\n    /**\n     * Précharge la liste principale des personnalités\n     */\n    static async prefetchPeopleList() {\n      try {\n        const data = await apiGet('/people');\n        await _cacheService.CacheService.set('people_all', data, 5 * 60 * 1000);\n      } catch (error) {\n        console.error('Failed to prefetch people list:', error);\n      }\n    }\n\n    /**\n     * Précharge les données trending\n     */\n    static async prefetchTrendingData() {\n      try {\n        const data = await apiGet('/trending-now?limit=5');\n        await _cacheService.CacheService.set('trending_data', data, 5 * 60 * 1000);\n      } catch (error) {\n        console.error('Failed to prefetch trending data:', error);\n      }\n    }\n\n    /**\n     * Précharge les données controversées\n     */\n    static async prefetchControversialData() {\n      try {\n        const data = await apiGet('/controversial?limit=5');\n        await _cacheService.CacheService.set('controversial_data', data, 5 * 60 * 1000);\n      } catch (error) {\n        console.error('Failed to prefetch controversial data:', error);\n      }\n    }\n\n    /**\n     * Précharge les graphiques d'une personnalité spécifique\n     */\n    static async prefetchPersonData(personId) {\n      try {\n        await Promise.all([apiGet(`/people/${personId}`).then(data => _cacheService.CacheService.set(`person_${personId}`, data, 2 * 60 * 1000)), apiGet(`/people/${personId}/chart?window=24h`).then(data => _cacheService.CacheService.set(`chart_24h_${personId}`, data, 2 * 60 * 1000)), apiGet(`/people/${personId}/chart?window=168h`).then(data => _cacheService.CacheService.set(`chart_168h_${personId}`, data, 5 * 60 * 1000))]);\n      } catch (error) {\n        console.error(`Failed to prefetch person ${personId}:`, error);\n      }\n    }\n\n    /**\n     * Précharge les personnalités les plus populaires\n     */\n    static async prefetchTopPeople(peopleIds) {\n      // Limiter à 5 max pour ne pas surcharger\n      const limitedIds = peopleIds.slice(0, 5);\n      for (const id of limitedIds) {\n        await this.prefetchPersonData(id);\n      }\n    }\n  }\n  var _c;\n  $RefreshReg$(_c, \"API\");\n});","lineCount":107,"map":[[7,2,15,0,"Object"],[7,8,15,0],[7,9,15,0,"defineProperty"],[7,23,15,0],[7,24,15,0,"exports"],[7,31,15,0],[8,4,15,0,"enumerable"],[8,14,15,0],[9,4,15,0,"get"],[9,7,15,0],[9,18,15,0,"get"],[9,19,15,0],[10,6,15,0],[10,13,15,0,"PrefetchService"],[10,28,15,0],[11,4,15,0],[12,2,15,0],[13,2,110,1],[13,6,110,1,"_expoVirtualEnv"],[13,21,110,1],[13,24,110,1,"require"],[13,31,110,1],[13,32,110,1,"_dependencyMap"],[13,46,110,1],[14,2,1,0],[14,6,1,0,"_cacheService"],[14,19,1,0],[14,22,1,0,"require"],[14,29,1,0],[14,30,1,0,"_dependencyMap"],[14,44,1,0],[15,2,3,0],[15,8,3,6,"API_BASE"],[15,16,3,14],[15,19,3,17,"_expoVirtualEnv"],[15,34,3,17],[15,35,3,17,"env"],[15,38,3,17],[15,39,3,17,"EXPO_PUBLIC_BACKEND_URL"],[15,62,3,17],[15,66,3,56],[15,68,3,58],[16,2,4,0],[16,8,4,6,"API"],[16,11,4,9],[16,14,4,13,"path"],[16,18,4,25],[16,22,4,30],[16,25,4,33,"API_BASE"],[16,33,4,41],[16,40,4,48,"path"],[16,44,4,52],[16,45,4,53,"startsWith"],[16,55,4,63],[16,56,4,64],[16,59,4,67],[16,60,4,68],[16,63,4,71,"path"],[16,67,4,75],[16,70,4,78],[16,74,4,82,"path"],[16,78,4,86],[16,80,4,88],[16,82,4,90],[17,2,4,91,"_c"],[17,4,4,91],[17,7,4,6,"API"],[17,10,4,9],[18,2,6,0],[18,17,6,15,"apiGet"],[18,23,6,21,"apiGet"],[18,24,6,25,"path"],[18,28,6,37],[18,30,6,51],[19,4,7,2],[19,10,7,8,"res"],[19,13,7,11],[19,16,7,14],[19,22,7,20,"fetch"],[19,27,7,25],[19,28,7,26,"API"],[19,31,7,29],[19,32,7,30,"path"],[19,36,7,34],[19,37,7,35],[19,38,7,36],[20,4,8,2],[20,8,8,6],[20,9,8,7,"res"],[20,12,8,10],[20,13,8,11,"ok"],[20,15,8,13],[20,17,8,15],[20,23,8,21],[20,27,8,25,"Error"],[20,32,8,30],[20,33,8,31],[20,40,8,38,"path"],[20,44,8,42],[20,48,8,46,"res"],[20,51,8,49],[20,52,8,50,"status"],[20,58,8,56],[20,60,8,58],[20,61,8,59],[21,4,9,2],[21,11,9,9,"res"],[21,14,9,12],[21,15,9,13,"json"],[21,19,9,17],[21,20,9,18],[21,21,9,19],[22,2,10,0],[24,2,12,0],[25,0,13,0],[26,0,14,0],[27,2,15,7],[27,8,15,13,"PrefetchService"],[27,23,15,28],[27,24,15,29],[28,4,16,2],[28,11,16,17,"isPrefetching"],[28,24,16,30],[28,27,16,33],[28,32,16,38],[30,4,18,2],[31,0,19,0],[32,0,20,0],[33,4,21,2],[33,17,21,15,"prefetchFrequentData"],[33,37,21,35,"prefetchFrequentData"],[33,38,21,35],[33,40,21,38],[34,6,22,4],[34,10,22,8],[34,14,22,12],[34,15,22,13,"isPrefetching"],[34,28,22,26],[34,30,22,28],[35,6,24,4],[35,10,24,8],[35,11,24,9,"isPrefetching"],[35,24,24,22],[35,27,24,25],[35,31,24,29],[36,6,26,4],[36,10,26,8],[37,8,27,6],[38,8,28,6],[38,14,28,12,"Promise"],[38,21,28,19],[38,22,28,20,"all"],[38,25,28,23],[38,26,28,24],[38,27,29,8],[38,31,29,12],[38,32,29,13,"prefetchPeopleList"],[38,50,29,31],[38,51,29,32],[38,52,29,33],[38,54,30,8],[38,58,30,12],[38,59,30,13,"prefetchTrendingData"],[38,79,30,33],[38,80,30,34],[38,81,30,35],[38,83,31,8],[38,87,31,12],[38,88,31,13,"prefetchControversialData"],[38,113,31,38],[38,114,31,39],[38,115,31,40],[38,116,32,7],[38,117,32,8],[39,8,34,6,"console"],[39,15,34,13],[39,16,34,14,"log"],[39,19,34,17],[39,20,34,18],[39,42,34,40],[39,43,34,41],[40,6,35,4],[40,7,35,5],[40,8,35,6],[40,15,35,13,"error"],[40,20,35,18],[40,22,35,20],[41,8,36,6,"console"],[41,15,36,13],[41,16,36,14,"error"],[41,21,36,19],[41,22,36,20],[41,39,36,37],[41,41,36,39,"error"],[41,46,36,44],[41,47,36,45],[42,6,37,4],[42,7,37,5],[42,16,37,14],[43,8,38,6],[43,12,38,10],[43,13,38,11,"isPrefetching"],[43,26,38,24],[43,29,38,27],[43,34,38,32],[44,6,39,4],[45,4,40,2],[47,4,42,2],[48,0,43,0],[49,0,44,0],[50,4,45,2],[50,17,45,23,"prefetchPeopleList"],[50,35,45,41,"prefetchPeopleList"],[50,36,45,41],[50,38,45,44],[51,6,46,4],[51,10,46,8],[52,8,47,6],[52,14,47,12,"data"],[52,18,47,16],[52,21,47,19],[52,27,47,25,"apiGet"],[52,33,47,31],[52,34,47,32],[52,43,47,41],[52,44,47,42],[53,8,48,6],[53,14,48,12,"CacheService"],[53,27,48,24],[53,28,48,24,"CacheService"],[53,40,48,24],[53,41,48,25,"set"],[53,44,48,28],[53,45,48,29],[53,57,48,41],[53,59,48,43,"data"],[53,63,48,47],[53,65,48,49],[53,66,48,50],[53,69,48,53],[53,71,48,55],[53,74,48,58],[53,78,48,62],[53,79,48,63],[54,6,49,4],[54,7,49,5],[54,8,49,6],[54,15,49,13,"error"],[54,20,49,18],[54,22,49,20],[55,8,50,6,"console"],[55,15,50,13],[55,16,50,14,"error"],[55,21,50,19],[55,22,50,20],[55,55,50,53],[55,57,50,55,"error"],[55,62,50,60],[55,63,50,61],[56,6,51,4],[57,4,52,2],[59,4,54,2],[60,0,55,0],[61,0,56,0],[62,4,57,2],[62,17,57,23,"prefetchTrendingData"],[62,37,57,43,"prefetchTrendingData"],[62,38,57,43],[62,40,57,46],[63,6,58,4],[63,10,58,8],[64,8,59,6],[64,14,59,12,"data"],[64,18,59,16],[64,21,59,19],[64,27,59,25,"apiGet"],[64,33,59,31],[64,34,59,32],[64,57,59,55],[64,58,59,56],[65,8,60,6],[65,14,60,12,"CacheService"],[65,27,60,24],[65,28,60,24,"CacheService"],[65,40,60,24],[65,41,60,25,"set"],[65,44,60,28],[65,45,60,29],[65,60,60,44],[65,62,60,46,"data"],[65,66,60,50],[65,68,60,52],[65,69,60,53],[65,72,60,56],[65,74,60,58],[65,77,60,61],[65,81,60,65],[65,82,60,66],[66,6,61,4],[66,7,61,5],[66,8,61,6],[66,15,61,13,"error"],[66,20,61,18],[66,22,61,20],[67,8,62,6,"console"],[67,15,62,13],[67,16,62,14,"error"],[67,21,62,19],[67,22,62,20],[67,57,62,55],[67,59,62,57,"error"],[67,64,62,62],[67,65,62,63],[68,6,63,4],[69,4,64,2],[71,4,66,2],[72,0,67,0],[73,0,68,0],[74,4,69,2],[74,17,69,23,"prefetchControversialData"],[74,42,69,48,"prefetchControversialData"],[74,43,69,48],[74,45,69,51],[75,6,70,4],[75,10,70,8],[76,8,71,6],[76,14,71,12,"data"],[76,18,71,16],[76,21,71,19],[76,27,71,25,"apiGet"],[76,33,71,31],[76,34,71,32],[76,58,71,56],[76,59,71,57],[77,8,72,6],[77,14,72,12,"CacheService"],[77,27,72,24],[77,28,72,24,"CacheService"],[77,40,72,24],[77,41,72,25,"set"],[77,44,72,28],[77,45,72,29],[77,65,72,49],[77,67,72,51,"data"],[77,71,72,55],[77,73,72,57],[77,74,72,58],[77,77,72,61],[77,79,72,63],[77,82,72,66],[77,86,72,70],[77,87,72,71],[78,6,73,4],[78,7,73,5],[78,8,73,6],[78,15,73,13,"error"],[78,20,73,18],[78,22,73,20],[79,8,74,6,"console"],[79,15,74,13],[79,16,74,14,"error"],[79,21,74,19],[79,22,74,20],[79,62,74,60],[79,64,74,62,"error"],[79,69,74,67],[79,70,74,68],[80,6,75,4],[81,4,76,2],[83,4,78,2],[84,0,79,0],[85,0,80,0],[86,4,81,2],[86,17,81,15,"prefetchPersonData"],[86,35,81,33,"prefetchPersonData"],[86,36,81,34,"personId"],[86,44,81,50],[86,46,81,52],[87,6,82,4],[87,10,82,8],[88,8,83,6],[88,14,83,12,"Promise"],[88,21,83,19],[88,22,83,20,"all"],[88,25,83,23],[88,26,83,24],[88,27,84,8,"apiGet"],[88,33,84,14],[88,34,84,15],[88,45,84,26,"personId"],[88,53,84,34],[88,55,84,36],[88,56,84,37],[88,57,84,38,"then"],[88,61,84,42],[88,62,84,43,"data"],[88,66,84,47],[88,70,85,10,"CacheService"],[88,83,85,22],[88,84,85,22,"CacheService"],[88,96,85,22],[88,97,85,23,"set"],[88,100,85,26],[88,101,85,27],[88,111,85,37,"personId"],[88,119,85,45],[88,121,85,47],[88,123,85,49,"data"],[88,127,85,53],[88,129,85,55],[88,130,85,56],[88,133,85,59],[88,135,85,61],[88,138,85,64],[88,142,85,68],[88,143,86,8],[88,144,86,9],[88,146,87,8,"apiGet"],[88,152,87,14],[88,153,87,15],[88,164,87,26,"personId"],[88,172,87,34],[88,191,87,53],[88,192,87,54],[88,193,87,55,"then"],[88,197,87,59],[88,198,87,60,"data"],[88,202,87,64],[88,206,88,10,"CacheService"],[88,219,88,22],[88,220,88,22,"CacheService"],[88,232,88,22],[88,233,88,23,"set"],[88,236,88,26],[88,237,88,27],[88,250,88,40,"personId"],[88,258,88,48],[88,260,88,50],[88,262,88,52,"data"],[88,266,88,56],[88,268,88,58],[88,269,88,59],[88,272,88,62],[88,274,88,64],[88,277,88,67],[88,281,88,71],[88,282,89,8],[88,283,89,9],[88,285,90,8,"apiGet"],[88,291,90,14],[88,292,90,15],[88,303,90,26,"personId"],[88,311,90,34],[88,331,90,54],[88,332,90,55],[88,333,90,56,"then"],[88,337,90,60],[88,338,90,61,"data"],[88,342,90,65],[88,346,91,10,"CacheService"],[88,359,91,22],[88,360,91,22,"CacheService"],[88,372,91,22],[88,373,91,23,"set"],[88,376,91,26],[88,377,91,27],[88,391,91,41,"personId"],[88,399,91,49],[88,401,91,51],[88,403,91,53,"data"],[88,407,91,57],[88,409,91,59],[88,410,91,60],[88,413,91,63],[88,415,91,65],[88,418,91,68],[88,422,91,72],[88,423,92,8],[88,424,92,9],[88,425,93,7],[88,426,93,8],[89,6,94,4],[89,7,94,5],[89,8,94,6],[89,15,94,13,"error"],[89,20,94,18],[89,22,94,20],[90,8,95,6,"console"],[90,15,95,13],[90,16,95,14,"error"],[90,21,95,19],[90,22,95,20],[90,51,95,49,"personId"],[90,59,95,57],[90,62,95,60],[90,64,95,62,"error"],[90,69,95,67],[90,70,95,68],[91,6,96,4],[92,4,97,2],[94,4,99,2],[95,0,100,0],[96,0,101,0],[97,4,102,2],[97,17,102,15,"prefetchTopPeople"],[97,34,102,32,"prefetchTopPeople"],[97,35,102,33,"peopleIds"],[97,44,102,52],[97,46,102,54],[98,6,103,4],[99,6,104,4],[99,12,104,10,"limitedIds"],[99,22,104,20],[99,25,104,23,"peopleIds"],[99,34,104,32],[99,35,104,33,"slice"],[99,40,104,38],[99,41,104,39],[99,42,104,40],[99,44,104,42],[99,45,104,43],[99,46,104,44],[100,6,106,4],[100,11,106,9],[100,17,106,15,"id"],[100,19,106,17],[100,23,106,21,"limitedIds"],[100,33,106,31],[100,35,106,33],[101,8,107,6],[101,14,107,12],[101,18,107,16],[101,19,107,17,"prefetchPersonData"],[101,37,107,35],[101,38,107,36,"id"],[101,40,107,38],[101,41,107,39],[102,6,108,4],[103,4,109,2],[104,2,110,0],[105,2,110,1],[105,6,110,1,"_c"],[105,8,110,1],[106,2,110,1,"$RefreshReg$"],[106,14,110,1],[106,15,110,1,"_c"],[106,17,110,1],[107,0,110,1],[107,3]],"functionMap":{"names":["<global>","API","apiGet","PrefetchService","PrefetchService.prefetchFrequentData","PrefetchService.prefetchPeopleList","PrefetchService.prefetchTrendingData","PrefetchService.prefetchControversialData","PrefetchService.prefetchPersonData","apiGet.then$argument_0","PrefetchService.prefetchTopPeople"],"mappings":"AAA;YCG,8ED;AEE;CFI;OGK;ECM;GDmB;EEK;GFO;EGK;GHO;EIK;GJO;EKK;2CCG;qEDC;4DCE;wEDC;6DCE;yEDC;GLM;EOK;GPO;CHC"},"hasCjsExports":false},"type":"js/module"}]}